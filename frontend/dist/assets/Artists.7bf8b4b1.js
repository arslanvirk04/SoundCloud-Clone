import{Y as U,u as k,b as u,r as o,j as s,c as t,F as T,T as j,h as P,Z as D}from"./index.ed1e7a57.js";import{R as H}from"./react-table.a34033a9.js";import{C as I}from"./index.fd20f91f.js";import{I as L,_ as f}from"./index.793864eb.js";import"./index.aeda6e92.js";function z(r){return U({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"},child:[]}]})(r)}function B(){const r=k(),n=u(e=>e.session.user),b=u(e=>e.songs?.trendingSongs?.trendSongs),[x,c]=o.exports.useState(!1),[l,w]=o.exports.useState(null),[y,g]=o.exports.useState(!1),[S,h]=o.exports.useState(!1),p=u(e=>e.users),i=(Array.isArray(p.users)?p.users:[]).filter(e=>e.type==="artist"),m=i.some(e=>e.id===n?.id),A=i?.map(e=>{const a=b?.filter(d=>d?.userId===e?.id).length;return{...e,uploadedSong:a}});o.exports.useEffect(()=>{(async()=>{h(!0),await r(j()),await r(P()),h(!1)})()},[n,r]),o.exports.useEffect(()=>{l&&i.some(e=>e.id===l.id)?g(!0):g(!1)},[l,i]);const v=()=>{c(!0)},C=e=>{w(e)},N=async()=>{const e=await r(D(l));e&&e.status===200?f.success("Artist has been added!",{duration:3e3,position:"top-right"}):f.error("Failed to add artist. Please try again.",{duration:3e3,position:"top-right"}),c(!1)};return s("div",{className:"p-4",style:{backgroundColor:"#000"},children:[t(I,{children:s("div",{className:"w-full",style:{backgroundColor:"#000"},children:[s("div",{className:"flex justify-between items-center mb-4",children:[t("h1",{className:"text-3xl font-bold text-white",children:"Artists"}),s("button",{className:`bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded flex items-center ${m?"cursor-not-allowed opacity-50":""}`,onClick:v,disabled:m,children:[t(z,{className:"mr-2"}),"Join as Artist"]})]}),S?t("div",{className:"flex justify-center items-center h-64",children:t(T,{className:"animate-spin text-white h-12 w-12"})}):t(H,{data:A,columns:[{Header:"Name",accessor:"username",style:{color:"white"}},{Header:"Uploaded Songs",accessor:"uploadedSong",style:{color:"white"}},{Header:"Created At",accessor:"createdAt",style:{color:"white"},Cell:({value:e})=>{const d=new Date(e).toLocaleDateString("en-US");return t("span",{style:{color:"white"},children:d})}}],defaultPageSize:5,showPageSizeOptions:!0,minRows:0,getTheadThProps:()=>({style:{backgroundColor:"#333",color:"white",padding:"10px",textAlign:"left"}}),getTheadTrProps:()=>({style:{backgroundColor:"rgba(255, 255, 255, 0.1)"}}),getTrProps:(e,a,d)=>({style:{backgroundColor:a&&a.row&&a.row.index%2===0?"rgba(255, 255, 255, 0.1)":"rgba(255, 255, 255, 0.05)",color:"white",padding:"10px"}})})]})}),x&&t("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:s("div",{className:"bg-white rounded-2xl shadow-md p-8 w-1/3",children:[t("h2",{className:"text-3xl font-bold text-center mb-5",children:"Select User To make Artist"}),s("select",{className:"w-full p-2 mb-6 bg-gray-200 rounded-md",onChange:e=>C(e.target.value),value:l,children:[t("option",{value:"",children:"Select User"}),n&&t("option",{value:n.id,children:n.username})]}),s("div",{className:"flex justify-end gap-1.5",children:[t("button",{className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded ml-4",onClick:()=>c(!1),children:"Cancel"}),t("button",{className:`bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded ${y?"cursor-not-allowed opacity-50":""}`,onClick:N,children:"Create Artist"})]})]})}),t(L,{})]})}export{B as default};
