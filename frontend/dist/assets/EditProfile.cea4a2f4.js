import{u as f,b as x,r as c,_ as y,j as s,c as e,$ as N}from"./index.ed1e7a57.js";import{C as v}from"./index.fd20f91f.js";import{I as w,_ as u}from"./index.793864eb.js";function E(){const o=f(),t=x(a=>a.session.user),[r,i]=c.exports.useState({username:"",email:"",type:"",status:"",imgUrl:""}),g="/assets/dummyProfile.png";c.exports.useEffect(()=>{t&&i({username:t.username,email:t.email,type:t.type,status:t.status,imgUrl:t.imgUrl||""})},[t]),c.exports.useEffect(()=>{o&&t&&p(t.id)},[o,t]);const p=async a=>{try{const l=await o(y(a));i(l)}catch(l){console.error("Error fetching user data:",l)}},n=a=>{i({...r,[a.target.name]:a.target.value})},h=a=>{const l=a.target.files[0],m=new FileReader;m.readAsDataURL(l),m.onload=()=>{const d=m.result;i({...r,imgUrl:d})},m.onerror=d=>{console.error("Error converting file to base64:",d)}},b=async a=>{a.preventDefault();try{await o(N({id:t.id,...r}))?u.success("Profile updated successfully!",{duration:3e3,position:"top-right"}):u.error("Failed to update profile. Please try again.",{duration:3e3,position:"top-right"})}catch(l){console.error("Error updating profile:",l),u.error("Failed to update profile. Please try again.",{duration:3e3,position:"top-right"})}};return s(v,{children:[s("div",{className:"bg-gray-800 text-white rounded-lg shadow-lg w-full mx-auto overflow-hidden p-4 md:p-6 lg:p-8 xl:p-10 mb-20",children:[s("div",{className:"text-center mb-8",children:[r?.imgUrl?e("img",{src:r?.imgUrl,alt:"Profile",className:"h-32 w-32 rounded-full object-cover mx-auto"}):e("img",{src:g,alt:"Profile",className:"h-32 w-32 rounded-full object-cover mx-auto"}),e("label",{htmlFor:"profileImage",className:"mt-4 inline-block text-center bg-blue-500 text-white rounded-lg px-4 py-2 cursor-pointer hover:bg-blue-600 transition duration-300",children:"Change Profile Image"}),e("input",{type:"file",id:"profileImage",accept:"image/*",onChange:h,className:"hidden"})]}),e("h2",{className:"text-xl md:text-2xl lg:text-3xl xl:text-4xl font-bold mb-4 md:mb-6",children:"Edit Profile"}),s("form",{onSubmit:b,className:"space-y-4 md:space-y-6",children:[s("div",{className:"mb-4 md:mb-6",children:[e("label",{className:"block text-gray-400",children:"Username:"}),e("input",{type:"text",name:"username",value:r?.username,onChange:n,className:"w-full mt-1 px-4 py-2 bg-gray-700 text-white rounded-lg"})]}),s("div",{className:"mb-4 md:mb-6",children:[e("label",{className:"block text-gray-400",children:"Email:"}),e("input",{type:"email",name:"email",value:r?.email,onChange:n,className:"w-full mt-1 px-4 py-2 bg-gray-700 text-white rounded-lg"})]}),s("div",{className:"mb-4 md:mb-6",children:[e("label",{className:"block text-gray-400",children:"Type:"}),e("input",{type:"text",name:"type",disabled:!0,value:r?.type,onChange:n,className:"w-full mt-1 px-4 py-2 bg-gray-700 cursor-not-allowed text-gray-400 rounded-lg"})]}),s("div",{className:"mb-4 md:mb-6",children:[e("label",{className:"block text-gray-400",children:"Status:"}),e("input",{type:"text",name:"status",disabled:!0,value:r?.status,onChange:n,className:"w-full mt-1 px-4 py-2 bg-gray-700 cursor-not-allowed text-gray-400 rounded-lg"})]}),e("div",{className:"flex justify-end mt-4 md:mt-6 xl:mt-8",children:e("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300",children:"Save Changes"})})]})]}),e(w,{})]})}export{E as default};
